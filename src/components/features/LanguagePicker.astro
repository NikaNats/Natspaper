---
// src/components/features/LanguagePicker.astro
// Pure presentational component for language selection with WCAG 2.5.5 touch target compliance

export interface LanguageLink {
  code: string;
  name: string;
  url: string;
}

export interface Props {
  links: LanguageLink[];
}

const { links } = Astro.props;
---

<div
  class="language-picker flex items-center gap-1 sm:gap-2"
  data-testid="language-picker"
>
  {
    links.map(({ code, name, url }) => (
      <a
        href={url}
        data-testid={`lang-${code}`}
        class:list={[
          // 1. Base Typography & Transition
          "text-sm font-medium transition-colors duration-200",
          "text-foreground hover:text-accent",

          // 2. Mobile / Touch First (WCAG 2.5.5: Target Size)
          // Enforce 44px minimum height/width for fingers (min-h-11 = 2.75rem = 44px)
          "flex min-h-11 min-w-11 items-center justify-center rounded-md",

          // 3. Desktop Overrides (Mouse Users)
          // Reset minimums to 0 and use tight padding for mouse precision
          "sm:min-h-0 sm:min-w-0 sm:px-2 sm:py-1",

          // 4. Focus State (Accessibility)
          "focus-visible:ring-2 focus-visible:ring-accent focus-visible:outline-none",
        ]}
        title={`Switch to ${name}`}
        aria-label={`Switch to ${name}`}
      >
        {code.toUpperCase()}
      </a>
    ))
  }
</div>

<style>
  /* 
   * Touch-Friendly Layout Container
   * Ensures proper alignment of language links with responsive gaps
   */
  .language-picker {
    display: flex;
    align-items: center;
  }
</style>

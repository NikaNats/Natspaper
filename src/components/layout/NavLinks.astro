---
// This component has no HTML output. It only prepares data and logic.

// 1. Import the navigation links from a single source of truth
import { NAV_LINKS } from "@/data/navigation";

// Re-export the data so existing consumers still work.
export const navLinks = NAV_LINKS;

// 2. The isActive logic is now self-contained here.
export function isActive(
  currentPath: string,
  linkPath: string,
  locale: string
): boolean {
  // Remove trailing slash from current pathname if exists
  const normalizedCurrentPath =
    currentPath.endsWith("/") && currentPath !== "/"
      ? currentPath.slice(0, -1)
      : currentPath;

  const currentPathArray = normalizedCurrentPath
    .split("/")
    .filter((p: string) => p.trim());
  const pathArray = linkPath.split("/").filter((p: string) => p.trim());

  // Compare paths, accounting for language prefix
  // For example: /en/posts should match /posts
  const currentPagePath = currentPathArray.slice(1); // Remove language code
  const checkPagePath = pathArray.slice(0); // The path to check

  if (
    currentPagePath.length === 0 &&
    checkPagePath.length === 1 &&
    checkPagePath[0] === "posts"
  ) {
    // Homepage (after language code) against /posts link
    return false;
  }

  return (
    normalizedCurrentPath === `/${locale}${linkPath}` ||
    normalizedCurrentPath === `/${locale}${linkPath}/` ||
    currentPagePath[0] === checkPagePath[0]
  );
}
---

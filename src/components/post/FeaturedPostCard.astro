---
import { slugifyStr } from "@/utils/core";
import type { CollectionEntry } from "astro:content";
import Datetime from "./Datetime.astro";

export interface Props {
  href: string;
  frontmatter: CollectionEntry<"blog">["data"];
}

const { href, frontmatter } = Astro.props;
const { title, description, pubDatetime, modDatetime, timezone } = frontmatter;
---

<li class="my-4" data-testid="post-card">
  <a
    href={href}
    class="group block no-underline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-accent focus-visible:outline-dashed"
  >
    <!-- Post Card: Clickable post preview -->
    <article
      class="post-card border-l-4 border-l-transparent py-3 pl-4 transition-colors group-hover:border-l-accent group-focus-visible:border-l-accent"
    >
      <h3
        class="text-lg font-bold text-foreground decoration-dashed transition-colors hover:text-accent"
        style={{ viewTransitionName: slugifyStr(title) }}
      >
        {title}
      </h3>
      <!-- Metadata display -->
      <div class="mt-2 text-sm text-text-secondary">
        <Datetime {pubDatetime} {modDatetime} {timezone} />
      </div>
      <!-- Multi-line excerpt for content preview -->
      <p class="mt-3 line-clamp-3 leading-relaxed text-foreground">
        {description}
      </p>
    </article>
  </a>
</li>

---
// REFACTORED: Now uses i18n for all UI text
import IconArrowLeft from "@/assets/icons/IconArrowLeft.svg";
import IconArrowRight from "@/assets/icons/IconArrowRight.svg";
import LinkButton from "./LinkButton.astro";
import { getI18n, type Lang } from "@/i18n";

// REFACTORED: The component now depends on a simple, abstract interface, not Astro's Page object.
export interface Props {
  currentPage: number;
  totalPages: number;
  prevUrl?: string;
  nextUrl?: string;
  class?: string;
}

const {
  currentPage,
  totalPages,
  prevUrl,
  nextUrl,
  class: className,
} = Astro.props;

// Get translations for current locale
const { t } = getI18n(Astro.currentLocale as Lang);
---

{
  totalPages > 1 && (
    <nav
      class:list={[
        "mt-auto mb-8 flex items-center justify-center gap-4",
        className,
      ]}
      aria-label="Pagination"
    >
      {/* REFACTORED: LinkButton now correctly handles an undefined href,
          making the 'as string' cast unnecessary and the code type-safe. */}
      <LinkButton
        href={prevUrl}
        class:list={["select-none", { "opacity-50": !prevUrl }]}
        ariaLabel={t("pagination.previousPage")}
      >
        <IconArrowLeft class="inline-block rtl:rotate-180" />
        {t("pagination.prev")}
      </LinkButton>

      {/* IMPROVED UX: The text is now more descriptive and accessible. */}
      <span class="text-sm text-text-secondary">
        {t("pagination.pageOf", { current: currentPage, total: totalPages })}
      </span>

      <LinkButton
        href={nextUrl}
        class:list={["select-none", { "opacity-50": !nextUrl }]}
        ariaLabel={t("pagination.nextPage")}
      >
        {t("pagination.next").replace("â†’", "").trim()}
        <IconArrowRight class="inline-block rtl:rotate-180" />
      </LinkButton>
    </nav>
  )
}

/* src/styles/base.css */
@layer base {
  html {
    @apply scroll-smooth bg-background;
    font-family: var(--font-inter), var(--font-georgian), system-ui, sans-serif;
    font-size: 16px;

    /* 
      STABILITY FIX: 
      Stable scrollbar gutter prevents layout shift when content height changes.
      overflow-x: hidden on html prevents horizontal scrollbars from rogue animations/elements.
    */
    scrollbar-gutter: stable;
    overflow-x: hidden;

    /* UX: Offset scroll position for sticky headers */
    scroll-padding-top: calc(var(--header-height) + 1.5rem);

    @media (min-width: 768px) {
      font-size: 18px;
    }

    @media (prefers-reduced-motion: reduce) {
      scroll-behavior: auto;
    }
  }

  body {
    @apply flex min-h-svh flex-col font-sans text-foreground antialiased;
    line-height: 1.6;
    letter-spacing: 0.01em;
    /* Ensure body also doesn't trigger horizontal scroll */
    overflow-x: hidden;
    width: 100%;

    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }

  section,
  footer {
    @apply mx-auto w-full px-4;
    max-width: var(--main-width);
  }

  /* Global Resets */
  * {
    @apply border-border;
    scrollbar-width: thin;
    scrollbar-color: var(--muted) transparent;
  }

  :focus-visible {
    @apply outline-2 outline-offset-2 outline-accent;
  }

  button {
    @apply cursor-pointer touch-manipulation;
    &:active,
    &[role="button"]:active {
      transform: scale(0.98);
    }
  }

  /* Utility for locking scroll when mobile menu is open */
  body.overflow-hidden {
    overflow: hidden !important;
  }

  /* Enhanced Links */
  a:not(.no-underline) {
    text-decoration: underline 1px;
    text-underline-offset: 0.25em;
    text-decoration-color: var(--accent);
    transition:
      text-decoration-color 0.2s ease,
      text-decoration-thickness 0.2s ease;

    &:is(:hover, :focus-visible) {
      text-decoration-thickness: 2px;
    }
  }
}

/* --- UTILITIES --- */
/* Correct Tailwind v4 syntax for defining a custom utility */
@utility max-w-app {
  max-width: 42rem; /* equivalent to max-w-2xl */
}

/* --- PRINT STYLES --- */
@media print {
  header,
  footer,
  button,
  .no-print {
    display: none !important;
  }
  body {
    @apply bg-white text-black;
  }
  html {
    font-size: 12pt;
  }
  a {
    text-decoration: none;
    color: black;
  }
  a[href^="http"]:after {
    content: " (" attr(href) ")";
    @apply text-xs text-gray-600;
  }
  pre,
  code {
    @apply border border-gray-300 whitespace-pre-wrap;
    page-break-inside: avoid;
  }
}

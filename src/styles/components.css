/* src/styles/components.css */
@layer components {
  /* ==========================================================================
     SHARED INTERFACE UTILITIES
     ==========================================================================
     Reusable interaction patterns that ensure consistency across the design system.
     Apply these to any interactive element for unified behavior.
     ========================================================================== */

  /**
   * Interactive Focus Ring
   * Standardized focus indicator for accessibility compliance.
   * Use on: buttons, links, form inputs, cards.
   */
  .interactive-focus {
    @apply focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-background focus-visible:outline-none;
  }

  /**
   * Card Hover Effect
   * Subtle lift and shadow for interactive cards.
   * Use on: post cards, feature cards, clickable containers.
   */
  .card-hover {
    @apply transition-all duration-200;
    &:hover {
      @apply mouse:-translate-y-0.5 mouse:shadow-lg mouse:shadow-accent/5;
    }
  }

  /**
   * Interactive Surface
   * Combined background, border, and hover state for clickable surfaces.
   * Use on: dropdown items, menu items, list items.
   */
  .interactive-surface {
    @apply transition-colors duration-150;
    &:hover {
      @apply bg-muted/50;
    }
    &:active {
      @apply bg-muted;
    }
  }

  /**
   * Text Link Hover
   * Standard text hover effect with accent underline.
   * Use on: inline links, navigation items.
   */
  .text-link-hover {
    @apply transition-colors duration-150;
    &:hover {
      @apply text-accent;
    }
  }

  /**
   * Button Press Effect
   * Subtle scale on active/pressed state.
   * Use on: buttons, icon buttons, toggles.
   */
  .button-press {
    @apply transition-transform duration-100 active:scale-[0.98];
  }

  /* ==========================================================================
     LAYOUT COMPONENTS
     ========================================================================== */

  /* Layout */
  header {
    @apply relative z-50 w-full bg-transparent transition-colors duration-300;
  }
  main:not(.article-container) {
    @apply relative z-0 mx-auto w-full flex-1 px-4;
    max-width: var(--main-width);
  }
  /* Article container has its own layout in PostDetails.astro */
  main.article-container {
    @apply relative z-0 mx-auto w-full flex-1;
    max-width: none;
    padding-inline: 0;
  }
  main > * + * {
    @apply mt-8;
  }

  /* ==========================================================================
     POST COMPONENTS
     ========================================================================== */

  /* Post Cards */
  .post-entry {
    @apply relative border-l-4 border-transparent pl-4 transition-all duration-200;
    &:is(:hover, :focus-within) {
      @apply rounded-r-md border-accent bg-muted;
    }
  }

  .post-summary-item {
    @apply transition-all duration-200;
    & .post-entry {
      @apply border-l-0;
    }
    &:is(:hover, :focus-within) .post-entry {
      @apply rounded-lg;
    }
  }

  .post-featured-card {
    @apply transition-all duration-300;
    &:hover {
      @apply mouse:shadow-xl mouse:shadow-accent/10;
    }
  }

  /* Post Meta */
  .post-hero-title {
    @apply relative z-10 text-center font-bold text-foreground;
    font-family: var(--font-inter), sans-serif;
    font-size: clamp(2rem, 5vw, 3rem);
    line-height: 1.1;
    letter-spacing: -0.02em;
    text-wrap: balance;
  }
  .post-hero-meta {
    @apply mt-4 flex flex-wrap items-center justify-between gap-4 border-b border-dashed border-border pb-4;
  }
  .metadata {
    @apply flex items-center gap-3 text-sm font-medium text-text-secondary;
  }

  /* ==========================================================================
     NAVIGATION COMPONENTS
     ========================================================================== */

  /* Navigation */
  .pagination {
    @apply my-12 flex list-none justify-center gap-4 p-0;
    & a,
    & span {
      @apply rounded-md border border-border px-4 py-2 text-sm transition-colors;
    }
    & a:hover {
      @apply border-accent bg-muted text-accent;
    }
    & .active {
      @apply border-accent bg-accent font-medium text-background;
    }
  }
  .active-nav {
    @apply font-medium text-accent underline decoration-wavy decoration-2 underline-offset-4;
  }

  /* ==========================================================================
     UI ELEMENTS
     ========================================================================== */

  /* Elements */
  .tag {
    @apply mr-2 mb-2 inline-flex items-center rounded-full border border-transparent bg-muted px-3 py-1 text-sm text-foreground transition-colors;
    &:hover {
      @apply border-accent/20 bg-accent/10 text-accent;
    }
  }
  .posts-container {
    @apply grid gap-6;
  }
  .posts-empty {
    @apply rounded-lg border-2 border-dashed border-border/40 p-8 text-center;
    & h3 {
      @apply mb-2 text-xl font-bold text-foreground;
    }
    & p {
      @apply text-text-secondary;
    }
  }
  .search-input {
    @apply w-full rounded-lg border border-border bg-background px-4 py-3 text-base text-foreground transition-all;
    &:focus {
      @apply border-accent ring-2 ring-accent/20 outline-none;
    }
  }
  .astro-code {
    @apply my-6 overflow-x-auto rounded-lg border border-border/50;
    scrollbar-width: thin;
    &::-webkit-scrollbar {
      @apply h-2;
    }
    &::-webkit-scrollbar-thumb {
      @apply rounded-full bg-muted;
    }
  }
  .visually-hidden {
    @apply sr-only;
  }
}

/* Keep only global mobile overrides if needed */
@media (max-width: 640px) {
  .pagination a,
  .pagination span {
    @apply px-4 py-3 text-base;
  }
}
